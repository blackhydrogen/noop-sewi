<style>
	.image-resource-container {
		height: 400px;
		width: 700px;
		position: relative;
		overflow: hidden;
	}
	.image-resource-image-container {
		width: 100%;
		height: 100%;
		background: #CCCCCC;
		overflow: hidden;
		position: relative;
	}
	.image-resource-image {
		position: absolute;
		height: auto;
	}
	.image-resource-control-panel {
		color: white;
		width: 100%;
		height: 50px;
		background-color: rgba(0, 0, 0, 0.8);
		position: absolute;
		bottom: 0px;
		left: 0px;
	}
	.image-resource-control-panel.hidden 
{		bottom: -50px;
	}
	.image-resource-control {
		margin-right: 10px;
		float: left;
		text-align: center;
		height: 100%;
	}
	.image-resource-show-hide-button {
		position: absolute;
		bottom: 0px;
		right: 0px;
		width: 100px;
		opacity: 0.3;
	}
	.image-resource-zoom {
		width: 45px;
	}
	.image-resource-show-hide-button:hover {
		opacity: 1;
	}
	.animated {
  		transition: all 200ms ease-in-out 0s;
	}
</style>
<script src="http://code.jquery.com/jquery-2.1.1.min.js">
</script>
<script type="text/javascript">

var mainContainer = $("<div class='image-resource-container'></div>");
	var imageContainer = $("<div class='image-resource-image-container'></div>")
	.appendTo(mainContainer);
		var imageElement = $("<img src='sf.jpg' class='image-resource-image'>")
		.appendTo(imageContainer);
	var controlsContainer = $("<div class='image-resource-control-panel animated'></div>")
	.appendTo(mainContainer);
		var brightnessControlContainer = $("<div class='image-resource-control'></div>")
		.appendTo(controlsContainer)
		.html("Brightness<br>");
			var brightnessControl = $("<input type='range' class='image-resource-brightness' min='0' max='2' step='0.1'>")
			.appendTo(brightnessControlContainer);
		var contrastControlContainer = $("<div class='image-resource-control'></div>")
		.appendTo(controlsContainer)
		.html("Contrast<br>");
			var contrastControl = $("<input type='range' class='image-resource-contrast' min='0' max='2' step='0.1'>")
			.appendTo(contrastControlContainer);
		var invertControlContainer = $("<div class='image-resource-control'></div>")
		.appendTo(controlsContainer)
			var invertControlLabel = $("<label>Invert</label>")
			.appendTo(invertControlContainer);
				var invertControl = $("<input type='checkbox' class='image-resource-invert'>")
				.prependTo(invertControlLabel);
		var zoomControlContainer = $("<div class='image-resource-control'></div>")
		.appendTo(controlsContainer)
		.html("Zoom<br>");
			var zoomControl = $("<input type='number' class='image-resource-zoom' min='10' max='200' step='10'>")
			.appendTo(zoomControlContainer);
			$("<span>%</span>")
			.appendTo(zoomControlContainer)
			var zoom100PercentButton = $("<input type='button' class='image-resource-zoom-100' value='100%'>")
			.appendTo(zoomControlContainer);
			var zoomFitButton = $("<input type='button' class='image-resource-zoom-fit' value='Fit'>")
			.appendTo(zoomControlContainer);
		var resetControlContainer = $("<div class='image-resource-control'></div>")
		.appendTo(controlsContainer);
			var resetControl = $("<input type='button' value='Reset' class='image-resource-reset-button'>")
			.appendTo(resetControlContainer);
	var showHideControlsButton = $("<input type='button' value='Hide Controls' class='image-resource-show-hide-button'>")
	.appendTo(mainContainer);

var imageSizeProperties = {
	original: {},
	fit: {},
	minZoom: {},
	maxZoom: {}
};

var imageMovementVariables = {
}

$(function() {

	mainContainer.prependTo( $("body") );

	brightnessControl.on("input", adjustImageFilters);
	contrastControl.on("input", adjustImageFilters);
	invertControl.on("change", adjustImageFilters);
	zoomControl.on("change", calculateImageZoomFromZoomControl);
	zoom100PercentButton.on("click", function() {
		updateImageZoom(imageSizeProperties.original.width);
	});
	zoomFitButton.on("click", setImageZoomToFit);

	resetControl.on("click", function() {
		brightnessControl.val(1);
		contrastControl.val(1);
		invertControl.prop("checked", false);
		adjustImageFilters();
		setImageZoomToFit();
	})

	showHideControlsButton.on("click", function() {
		if($(this).val() == "Hide Controls") {
			controlsContainer.addClass("hidden");
			$(this).val("Show Controls");
		}
		else {
			controlsContainer.removeClass("hidden");
			$(this).val("Hide Controls");	
		}
	});

	imageContainer.on("mousewheel", calculateImageZoomFromMousewheel);

	imageContainer.on("mousedown", function(event) {
		imageMovementVariables.originalCursorX = event.pageX;
		imageMovementVariables.originalCursorY = event.pageY;
		imageMovementVariables.originalImageX = imageElement.position().left;
		imageMovementVariables.originalImageY = imageElement.position().top;
		imageMovementVariables.maxImageX = imageContainer.width() / 2;
		imageMovementVariables.maxImageY = imageContainer.height() / 2;
		imageMovementVariables.minImageX = imageMovementVariables.maxImageX - imageElement.width();
		imageMovementVariables.minImageY = imageMovementVariables.maxImageY - imageElement.height();
		imageMovementVariables.ignoreEvent = false; // Used for performances purposes. This variable is set when moveImageToCursor is called too quickly consecutively (after each call to moveImageToCursor, it is set to true, then a timeout() - with some delay - is set it back to false)

		imageContainer.unbind("mousewheel", calculateImageZoomFromMousewheel); //Don't allow the user to move and zoom
		$("body").on("mousemove", moveImageToCursor);
		DEBUG_MOVE_COUNTER=0;
	});

	$("body").on("mouseup", function(event) {
		imageContainer.on("mousewheel", calculateImageZoomFromMousewheel);
		$("body").unbind("mousemove", moveImageToCursor);
		console.log(DEBUG_MOVE_COUNTER);
	});

	imageElement.load(function() {
		setImageSizeProperties();
		setImageZoomToFit();
	});
	
});

var DEBUG_MOVE_COUNTER = 0;

function moveImageToCursor(event) {
	if(imageMovementVariables.ignoreEvent) return false;
	DEBUG_MOVE_COUNTER++;
	var newImageX =  imageMovementVariables.originalImageX + event.pageX - imageMovementVariables.originalCursorX;
	var newImageY =  imageMovementVariables.originalImageY + event.pageY - imageMovementVariables.originalCursorY;

	if(newImageX < imageMovementVariables.minImageX)
		newImageX = imageMovementVariables.minImageX;
	else if(newImageX > imageMovementVariables.maxImageX)
		newImageX = imageMovementVariables.maxImageX;

	if(newImageY < imageMovementVariables.minImageY)
		newImageY = imageMovementVariables.minImageY;
	else if(newImageY > imageMovementVariables.maxImageY)
		newImageY = imageMovementVariables.maxImageY;

	imageElement.css({
		top: newImageY,
		left: newImageX
	});

	imageMovementVariables.ignoreEvent = true;
	setTimeout(function() {
		imageMovementVariables.ignoreEvent = false;
	}, 10);

	return false;
}

function calculateImageZoomFromMousewheel(event) {
	var zoomChange = 1 + 0.2 * event.originalEvent.wheelDelta / 120;
	var newImageWidth = imageElement.width() * zoomChange;

	updateImageZoom(newImageWidth);

	return false;
}

function calculateImageZoomFromZoomControl() {
	var newImageWidth = imageSizeProperties.original.width * zoomControl.val() / 100;

	updateImageZoom(newImageWidth);
}

function updateImageZoom(newImageWidth) {
	if(newImageWidth < imageSizeProperties.minZoom.width) {
		newImageWidth = imageSizeProperties.minZoom.width;
	}
	else if(newImageWidth > imageSizeProperties.maxZoom.width) {
		newImageWidth = imageSizeProperties.maxZoom.width;
	}

	imageElement.width( newImageWidth );

	if(newImageWidth < imageSizeProperties.fit.width) {
		centreImageOnCanvas();
	}

	updateZoomPercentage();
}

function updateZoomPercentage() {
	zoomControl.val( Math.floor(imageElement.width() / imageSizeProperties.original.width * 100) );
}

function setImageZoomToFit() {
	imageElement.width( imageSizeProperties.fit.width );

	updateZoomPercentage();

	centreImageOnCanvas();
}

function centreImageOnCanvas() {
	imageElement.css({
		top: (imageContainer.height() - imageElement.height()) / 2,
		left: (imageContainer.width() - imageElement.width()) / 2
	});
}

function setImageSizeProperties() {

	imageSizeProperties.original.width = imageElement.prop("naturalWidth");
	imageSizeProperties.original.height = imageElement.prop("naturalHeight");

	//Compute fit sizes
	var originalWidth = imageElement.prop("naturalWidth");
	var originalHeight = imageElement.prop("naturalHeight");
	var containerWidth = imageContainer.width();
	var containerHeight = imageContainer.height();

	if(originalWidth <= containerWidth) {
		if(originalHeight <= containerHeight) {
			imageSizeProperties.fit.width = originalWidth;
			imageSizeProperties.fit.height = originalHeight;
		}
		else {
			imageSizeProperties.fit.width = originalWidth * containerHeight / originalHeight;
			imageSizeProperties.fit.height = containerHeight;
		}
	}
	else {
		if(originalHeight <= containerHeight) {
			imageSizeProperties.fit.width = containerWidth;
			imageSizeProperties.fit.height = originalHeight * containerWidth / originalWidth;
		}
		else {
			var adjustedWidth = originalWidth * containerHeight / originalHeight;

			if(adjustedWidth <= containerWidth) {
				imageSizeProperties.fit.width = adjustedWidth;
				imageSizeProperties.fit.height = originalHeight * adjustedWidth / originalWidth;
			}
			else {
				imageSizeProperties.fit.width = containerWidth;
				imageSizeProperties.fit.height = originalHeight * containerWidth / originalWidth;
			}
		}
	}
	// End Compute fit sizes

	imageSizeProperties.minZoom.width = imageSizeProperties.fit.width / 2;
	imageSizeProperties.minZoom.height = imageSizeProperties.fit.height / 2;

	imageSizeProperties.maxZoom.width = imageSizeProperties.original.width * 2;
	imageSizeProperties.maxZoom.height = imageSizeProperties.original.height * 2;
}

function adjustImageFilters() {
	imageElement.css("-webkit-filter",
			"brightness(" + brightnessControl.val() + ")"
			+ "contrast(" + contrastControl.val() + ")"
			+ "invert(" + (invertControl.prop("checked") ? 1 : 0) + ")");
}

</script>

<body>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
<p>hi</p>
</body>